<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- 
    - primary meta tags
    -->
    <title>CHANG</title>
    <meta name="title" content="not yet" />
    <meta name="description" content="not yet" />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/main_res.css" />
  </head>
  <body id="main-body">
    <div id="wrapper">
      <!-- 
      - #HEADER
      -->
      <header>
        <div class="navWrap">
          <a href="index.html" id="logo"
            ><img src="./image/logo-w.png" alt=""
          /></a>
          <nav>
            <ul>
              <li>
                <a href="intro.html">기업소개</a>
              </li>
              <li>
                <a href="business.html">사업분야</a>
              </li>
              <li>
                <a href="esg.html">지속가능경영</a>
              </li>
              <li>
                <a href="marketing.html">홍보센터</a>
              </li>
            </ul>
          </nav>
          <div class="hiddenNav">
            <nav>
              <div class="small">
                <div class="imgPosi">
                  <h2>CHANG</h2>
                  <img src="image/lightsbuildings.jpg" alt="" loading="lazy" />
                </div>
              </div>
              <ul>
                <li>
                  <a href="intro.html">기업소개</a>
                </li>
                <li>
                  <a href="business.html">사업분야</a>
                </li>
                <li>
                  <a href="esg.html">지속가능경영</a>
                </li>
                <li>
                  <a href="marketing.html">홍보센터</a>
                </li>
              </ul>
            </nav>
          </div>

          <div class="lang">
            <div class="langWrap">
              <ion-icon name="globe-outline"></ion-icon>
              <span>KOR</span>
            </div>

            <ul class="hiddenLang">
              <li>ENG</li>
            </ul>
          </div>
          <div class="toggleBtn">
            <!-- <ion-icon name="menu-outline"></ion-icon> -->
            <div class="toggle">
              <span></span>
              <span></span>
              <span></span>
            </div>
          </div>
        </div>
      </header>
      <main>
        <!-- 
        - #HERO
        -->
        <section class="hero" aria-label="home" id="home">
          <ul class="hero-slider" data-hero-slider>
            <li class="slider-item active" data-hero-slider-item>
              <div class="slider-bg">
                <img
                  src="image/nature.jpg"
                  width="1880"
                  height="950"
                  alt=""
                  class="img-cover"
                  loading="lazy"
                />
              </div>

              <p class="label-2 section-subtitle slider-reveal">
                Nature & Harmony
              </p>

              <h1 class="display-1 hero-title slider-reveal">
                자연과 조화된 건축
              </h1>

              <p class="body-2 hero-text slider-reveal">
                자연과 조화된 건축물을 구축하여 자연환경을 보호하고,<br />
                건축물과 자연이 조화로운 삶을 제공합니다
              </p>
            </li>
            <li class="slider-item active" data-hero-slider-item>
              <div class="slider-bg">
                <img
                  src="image/lightsbuildings.jpg"
                  width="1880"
                  height="950"
                  alt=""
                  class="img-cover"
                  loading="lazy"
                />
              </div>

              <p class="label-2 section-subtitle slider-reveal">
                Creation of Social Value
              </p>

              <h1 class="display-1 hero-title slider-reveal">
                사회적 가치 창출
              </h1>

              <p class="body-2 hero-text slider-reveal">
                지속 가능한 발전을 위해 사회적 가치를 창출하며, 환경 친화적인
                공간을 조성합니다
              </p>
            </li>
            <li class="slider-item active" data-hero-slider-item>
              <div class="slider-bg">
                <img
                  src="image/traffic-downtown-hong-kong.jpg"
                  width="1880"
                  height="950"
                  alt=""
                  class="img-cover"
                  loading="lazy"
                />
              </div>

              <p class="label-2 section-subtitle slider-reveal">
                Innovation & Technological Leadership
              </p>

              <h1 class="display-1 hero-title slider-reveal">
                혁신과 기술 선도
              </h1>

              <p class="body-2 hero-text slider-reveal">
                혁신적인 기술을 통해 산업을 선도하며, 창의적인 아이디어로 미래를
                준비합니다
              </p>
            </li>
          </ul>
          <div class="btns">
            <span class="slider-btn"></span>
            <span class="slider-btn"></span>
            <span class="slider-btn"></span>
          </div>
        </section>

        <!-- 
        - #info
         -->
        <section id="info">
          <div class="infoText">
            <div class="mainlogo">
              <div class="logo-container">
                <svg
                  viewBox="0 0 491 398"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <mask
                    id="mask0_406_18"
                    style="mask-type: alpha"
                    maskUnits="userSpaceOnUse"
                    x="0"
                    y="0"
                    width="491"
                    height="398"
                  >
                    <rect width="491" height="398" fill="#D9D9D9" />
                  </mask>
                  <g mask="url(#mask0_406_18)">
                    <path
                      d="M208.995 281.595L0 72.6V184.458L147.178 331.636V776.118L208.995 837.935V281.595Z"
                      fill="#0421FF"
                      fill-opacity="0.3"
                    />
                    <path
                      d="M488.636 72.6L279.641 281.595V837.935L488.636 628.939V72.6Z"
                      fill="#0421FF"
                      fill-opacity="0.3"
                    />
                    <path
                      d="M245.426 52L328.958 135.532L245.426 219.064L161.894 135.532L245.426 52Z"
                      fill="#0421FF"
                      fill-opacity="0.3"
                    />
                  </g>
                </svg>
              </div>
            </div>

            <div class="topText">
              <div class="text-box">
                <div class="text-wrap">
                  <svg class="textSvg" viewBox="0 0 800 160">
                    <text x="30" y="50%">C</text>
                    <text x="120" y="50%">H</text>
                    <text x="220" y="50%">A</text>
                    <text x="310" y="50%">N</text>
                    <text x="400" y="50%">G</text>
                  </svg>
                  <!-- 
                  <svg class="textSvg" viewBox="0 0 525 160">
                    
                    <text x="0" y="50%">C</text>
                    <text x="70" y="50%">H</text>
                    <text x="140" y="50%">A</text>
                    <text x="210" y="50%">N</text>
                    <text x="280" y="50%">G</text>
                  </svg> -->
                </div>
              </div>
              <h4>창 건설</h4>
              <p>
                사람과 환경의 연결을 통해 새로운 건설 문화를 만들어 가겠습니다
              </p>
            </div>
          </div>

          <div class="infoMain">
            <div class="mainTop">
              <div class="img-box" data-reveal="left">
                <img
                  src="image/buildingglass.jpg"
                  alt=""
                  class="img"
                  loading="lazy"
                />
              </div>
              <div class="subText">
                <h2 data-reveal="right">
                  더 큰 미래를 향한 새로운<br />
                  세계 건설
                </h2>
                <p data-reveal="right">
                  주거 공간은 편의성뿐만 아니라 품격까지 갖춰야 합니다. 특별한
                  주거공간을 원하는 고객들을 위해 품격 있는 주거 복합 시설을
                  선보이고 있습니다.
                </p>
              </div>
            </div>
            <div class="mainBottom">
              <div class="img-box" data-reveal="right">
                <img
                  src="image/cityscape.jpg"
                  alt=""
                  class="img"
                  loading="lazy"
                />
              </div>
              <div class="subText">
                <h2 data-reveal="left">
                  자연의 터전에 새로운<br />
                  공간 창조
                </h2>
                <p data-reveal="left">
                  우수한 토목 시공능력을 바탕으로 대한민국의 국토개발에 앞장서
                  왔습니다.
                </p>
              </div>
            </div>
          </div>
        </section>
        <!-- 
        - #business
         -->
        <section id="business">
          <div class="mainText">
            <h2>BUSINESS AREA</h2>
            <h5>창 건설의 주요 사업부문</h5>
          </div>

          <div class="cardBox">
            <ul>
              <li>
                <div class="boxText">
                  <h5>주택사업</h5>
                  <p>housing</p>
                </div>
              </li>
              <li>
                <div class="boxText">
                  <h5>건축사업</h5>
                  <p>architectural work</p>
                </div>
              </li>
              <li>
                <div class="boxText">
                  <h5>토목사업</h5>
                  <p>public works</p>
                </div>
              </li>
            </ul>
          </div>
        </section>
        <!-- 
        - #network
         -->
        <section id="network">
          <div class="netMap">
            <img src="image/map.png" alt="" class="img-cover" loading="lazy" />

            <div class="dots">
              <span></span>
              <span></span>
              <span></span>
              <span></span>
              <span></span>
              <span></span>
              <span></span>
              <span></span>
              <span></span>
              <span></span>
            </div>
          </div>
          <div class="netWrap">
            <div class="mainText">
              <h2>GLOBAL NETWORK</h2>
              <h5 class="fontLight">
                높은 기술력과 실력으로 해외 네트워크는<br />점점 넓어지고
                있습니다
              </h5>
            </div>
            <div class="netText">
              <p>
                국가
                <span class="number" data-count="10"
                  ><span class="number1">0</span>개국</span
                >
              </p>
              <p>
                거점
                <span class="number" data-count="20"
                  ><span class="number1">0</span>개</span
                >
              </p>
            </div>
          </div>
        </section>
      </main>
      <!-- 
       - footer 
       -->
      <footer>
        <div class="footerWrap">
          <div class="footerLeft">
            <a href="index.html"><img src="image/logo-w.png" alt="" /></a>
            <div class="fText">
              <span><a href="#">개인정보처리방침</a></span>
              <span><a href="#">법적고지</a></span>
              <span><a href="#">수출입경영방침</a></span>
              <span><a href="#">공시정보관리규정</a></span>
              <span><a href="#">고객센터</a></span>
              <span><a href="#">오시는 길</a></span>
            </div>
            <div class="fLink">
              <span><a href="#">기업소개</a></span>
              <span><a href="#">사업분야</a></span>
              <span><a href="#">지속가능경영</a></span>
              <span><a href="#">홍보센터</a></span>
            </div>
            <div class="fSmallText">
              <p>인천광역시 연수구 아카데미로 23 <span>032-4512-4545</span></p>
              <p>© CHANG Construction INC. ALL RIGHT RESERVED</p>
            </div>
          </div>
          <div class="footerRight">
            <div class="fSite">
              <select name="menu" id="menu">
                <option value="" disabled selected>Family Site</option>
                <option value="com1">대진 기획사</option>
                <option value="com2">용방 건축</option>
              </select>
              <ion-icon name="chevron-down-outline"></ion-icon>
            </div>
            <div class="social">
              <ion-icon name="logo-facebook"></ion-icon>
              <ion-icon name="logo-youtube"></ion-icon>
              <ion-icon name="logo-instagram"></ion-icon>
            </div>
          </div>
        </div>
      </footer>
      <!-- 
        - #BACK TO TOP
      -->
      <div class="backtoTop">
        <div class="center">
          <ion-icon name="chevron-up-outline"></ion-icon>
        </div>
      </div>
    </div>

    <script>
      /**
       * svg 애니메이션
       */

      let infoSection = document.querySelector(".infoText");
      let svgElements = infoSection.querySelectorAll(".textSvg text");
      let logoContainer = document.querySelector(".logo-container");
      let topTextElements = document.querySelectorAll(
        ".topText h4, .topText p"
      );

      let svgAnimated = false;

      function animateSVG() {
        // 텍스트 애니메이션 시작
        svgElements.forEach((text) => {
          text.style.opacity = 1;
          text.style.animationPlayState = "running";
        });

        // 로고 애니메이션 시작
        logoContainer.style.animationPlayState = "running";
      }

      function animateTopText() {
        // 3초 후에 topTextElements 애니메이션 트리거
        setTimeout(() => {
          topTextElements.forEach((element) => {
            element.classList.add("visible");
          });
        }, 3000); // 3초 후 애니메이션 시작
      }

      function handleIntersection(entries, observer) {
        entries.forEach((entry) => {
          if (entry.isIntersecting && !svgAnimated) {
            console.log("진입");
            svgAnimated = true; // 플래그를 설정하여 중복 실행 방지

            console.log("시작");
            animateSVG();
            animateTopText();
          }
        });
      }

      let options = {
        root: null,
        rootMargin: "0px",
        threshold: 0.5,
      };

      let observerSvg = new IntersectionObserver(handleIntersection, options);
      observerSvg.observe(infoSection);

      /**
       * 카드박스 움직이기
       */
      const section1 = document.querySelector("#business");
      const oneListItem = document.querySelector(".cardBox ul li:nth-child(1)");
      const twoListItem = document.querySelector(".cardBox ul li:nth-child(2)");
      const threeListItem = document.querySelector(
        ".cardBox ul li:nth-child(3)"
      );

      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              twoListItem.classList.add("active");
              oneListItem.classList.add("active");
              threeListItem.classList.add("active");
            }
          });
        },
        { threshold: 0 }
      ); // threshold는 요소가 화면에 표시되는 정도를 나타내는 값입니다. 0부터 1까지의 값이 가능하며, 1은 요소가 완전히 화면에 나타날 때를 나타냅니다.

      observer.observe(section1);

      /**
       * 카운팅
       */

      const networkSection = document.querySelector(".netText");

      const countObserver = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              // 요소가 화면에 나타났을 때 카운트 시작 함수 호출
              startCounting();
            }
          });
        },
        { threshold: 0 }
      );

      countObserver.observe(networkSection);

      let isCounting = false; // 카운트가 이미 시작되었는지 여부를 나타내는 변수

      // 카운트 시작 함수
      function startCounting() {
        // 이미 카운트가 시작되었으면 함수를 종료합니다.
        if (isCounting) {
          return;
        }

        // 카운트가 시작되었음을 표시합니다.
        isCounting = true;

        // 각 숫자 요소를 가져와서 카운트 시작
        var numberElements = document.querySelectorAll(".number1");
        var duration = 2000; // 모든 숫자가 2초 동안 카운트되도록 설정
        var startTime = Date.now();

        numberElements.forEach(function (element) {
          var targetCount = parseInt(element.parentNode.dataset.count);
          countUp(element, targetCount, startTime, duration);
        });
      }

      // 숫자가 올라가는 카운트 함수
      function countUp(element, targetCount, startTime, duration) {
        function update() {
          var currentTime = Date.now();
          var elapsedTime = currentTime - startTime;
          var progress = Math.min(elapsedTime / duration, 1);
          var currentCount = Math.floor(progress * targetCount);
          element.textContent = currentCount;

          if (progress < 1) {
            requestAnimationFrame(update);
          }
        }

        update();
      }

      /**
       * HERO SLIDER
       */

      const heroSlider = document.querySelector("[data-hero-slider]");
      const heroSliderItems = document.querySelectorAll(
        "[data-hero-slider-item]"
      );

      let btns = document.querySelectorAll(".slider-btn");

      let currentSlidePos = 0;
      let lastActiveSliderItem = heroSliderItems[0];
      let btnsItem = btns[0];

      btns[0].classList.add("active");

      // 페이지 로드 시 첫 번째 슬라이드를 표시
      heroSliderItems.forEach((slide, index) => {
        if (index === 0) {
          slide.classList.add("active");
        } else {
          slide.classList.remove("active");
        }
      });

      btns.forEach((btn, index) => {
        btn.addEventListener("click", () => {
          // 현재 활성화된 슬라이드와 버튼을 비활성화합니다.
          const currentActiveSlide = document.querySelector(
            ".slider-item.active"
          );
          const currentActiveBtn = document.querySelector(".slider-btn.active");
          currentActiveSlide.classList.remove("active");
          currentActiveBtn.classList.remove("active");

          // 클릭한 버튼과 해당 슬라이드를 활성화합니다.
          heroSliderItems[index].classList.add("active");
          btn.classList.add("active");

          currentSlidePos = index;
          clearInterval(autoSlideInterval);
          autoSlide();
        });
      });

      const updateSliderPos = function () {
        // 모든 슬라이드와 버튼에서 'active' 클래스 제거
        heroSliderItems.forEach((item) => item.classList.remove("active"));
        btns.forEach((button) => button.classList.remove("active"));

        // 현재 슬라이드와 버튼에 'active' 클래스 추가
        heroSliderItems[currentSlidePos].classList.add("active");
        btns[currentSlidePos].classList.add("active");

        // 'lastActiveSliderItem'과 'btnsItem' 업데이트
        lastActiveSliderItem = heroSliderItems[currentSlidePos];
        btnsItem = btns[currentSlidePos];
      };
      const slideNext = function () {
        if (currentSlidePos >= heroSliderItems.length - 1) {
          currentSlidePos = 0;
        } else {
          currentSlidePos++;
        }
        updateSliderPos();
      };

      /**
       * auto slide
       */

      let autoSlideInterval;

      const autoSlide = function () {
        autoSlideInterval = setInterval(function () {
          slideNext();
        }, 6000);
      };

      window.addEventListener("load", autoSlide);

      /**
       * reveal
       */

      const revealElements = document.querySelectorAll("[data-reveal]");

      const scrollReaveal = function () {
        for (let i = 0, len = revealElements.length; i < len; i++) {
          const isElementsOnScreen =
            revealElements[i].getBoundingClientRect().top < window.innerHeight;

          if (isElementsOnScreen) {
            revealElements[i].classList.add("revealed");
          } else {
            revealElements[i].classList.remove("revealed");
          }
        }
      };

      window.addEventListener("scroll", scrollReaveal);
      window.addEventListener("load", scrollReaveal);
    </script>

    <script src="js/main.js" defer></script>
    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>
  </body>
</html>
